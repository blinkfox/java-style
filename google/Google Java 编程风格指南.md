# Google Java 编程风格指南

## 1 介绍

这份文档是 Google Java 编程风格规范的**完整**定义。当且仅当 Java 源文件符合此文档中的规则时，我们才认为它符合 Google 的 Java 编程风格。

与其它的编程风格指南一样，这些问题不仅涵盖编码格式方面的美学问题，而且还涵盖了其他方面的约定和编码标准。然而，本文档主要侧重于我们普遍遵循的**严格规则**，并避免给出无法明确执行的建议（无论是通过人工还是通过工具）。

### 1.1 术语说明

在本文档中，除非特殊说明：

1. 术语 `class` 表示“普通”类，枚举类，接口或注解（`@interface`）。
2. 术语 `member`（在类中）表示嵌套的类、属性、方法或者构造方法，也就是一个类中的所有顶级内容，初始值和注释除外。
3. 术语 `comment` 只用来表示实现的注释（`implementation comments`），我们不使用文档注释（`documentation comments`）一词，而是用`Javadoc`。

其他术语的说明，将偶尔在文档中的特定地方单独说明。

### 1.2 指南

本文档中的示例代码并**不作为规范**。也就是说，虽然示例代码是遵循 Google 编程风格的，但并不意味着这是表示这些代码的唯一方式。示例中的格式选择不应该被强制定为规则。

## 2 源文件基础

### 2.1 文件名

源文件名由最顶层的、大小写敏感的类名（只有[一个](https://checkstyle.sourceforge.io/styleguides/google-java-style-20180523/javaguide.html#s3.4.1-one-top-level-class)）来命名，文件扩展名为 `.java`。

### 2.2 文件编码：UTF-8

源文件使用 **UTF-8** 编码。

### 2.3 特殊字符

#### 2.3.1 空格字符

除了换行符外，**ASCII 水平空格字符（`0x20`）**是源码文件中唯一支持的空格字符。这意味着：

1. 所有其他空白字符将都会被转义。
2. Tab 制表符不用于缩进。

#### 2.3.2 特殊转义序列

对于具有[特殊转义序列](http://docs.oracle.com/javase/tutorial/java/data/characters.html)（例如：`\b`, `\t`, `\n`, `\f`, `\r`, `\"`, `\'`, `\\`等）的字符，都采用这种转义字符的方式表示，而不采用对应字符的八进制数（如：`\012`）或 Unicode （如：`\u000a`）来表示。

#### 2.3.3 非 ASCII 字符

对于其余的非 ASCII 字符，就直接使用 Unicode 字符即可（如：`∞`），或者使用等效的 Unicode 转义符（如：`\u221e`）。尽管强烈建议不要使用 Unicode 字符来表示字符串，但选择的核心理由是哪种代码更让人**易于阅读和理解**。

> **提示**：在使用 Unicode 转义符时，或者甚至是有时直接使用 Unicode 字符的时候，建议多添加一些解释性的注释说明。

示例：

| 示例  | 结论  |
| ------------ | ------------ |
| String unitAbbrev = "μs";	 | 最佳：即使没有注释也非常清晰。 |
| String unitAbbrev = "\u03bcs"; // "μs"  | 允许，但没有理由要这样做。  |
| String unitAbbrev = "\u03bcs"; // Greek letter mu, "s"  | 允许，但这样做显得笨拙还容易出错。  |
| String unitAbbrev = "\u03bcs";  | 很糟：读者根本看不出这是什么。  |
| return '\ufeff' + content; // byte order mark  | 很好：对于非打印字符，使用转义，并在必要时写上注释。  |

> **提示**：不要因为担心某些程序可能无法正确处理非 ASCII 字符而降低了代码的可读性。如果真的发生这种情况，程序就会**阻断**，必须对其进行**修复**。

## 3 源文件结构

源文件按**从上到下的顺序**，由以下几部分组成：

1. 许可证 (`License`）或版权信息（`copyright`）（如果有）
2. 包（`package`）语句
3. 包导入（`import`）语句
4. 低级类（`class`）类声明

> **注意**：以上每个部分之间应该只有**一个空行**作为分隔。

### 3.1 许可证或版权信息（如果有）

如果一个文件中包含许可证或版权信息，那么它应该在文件最前面。

### 3.2 package 语句

包（`package`）语句不换行，列限制（4.4 节，[列限制](#)）不适用于 `package` 语句。(即 `package` 语句独立成行)

### 3.3 import 语句

#### 3.3.1 import 不使用通配符

包导入（`import`）语句中**都不使用通配符**），不管是否是静态导入（`static import`）。

#### 3.3.2 import 不换行

包导入（`import`）语句不换行，列限制（4.4 节，[列限制](#)）不适用于 `import` 语句。(即每个 `import` 语句独立成行)

#### 3.3.3 顺序和间距

包导入（`import`）语句顺序如下：

1. 所有静态导入（`static import`）都在一个块中。
2. 所有非静态导入都在一个块中。

如果同时具有静态和非静态导入，则使用**一个空行**将两块分开。每个块的若干导入语句之间不空行。

在每个块中，导入的名称均按 ASCII 顺序排序。（**注意**：这与按 ASCII 排序的 import 语句不同，因为 `.` 在 `;` 之前排序。）

#### 3.3.4 静态内部类不用静态导入

静态内部类中不用静态导入（`static import`）。它们使用普通方式的导入（`import`）语句。

### 3.4 类声明

#### 3.4.1 仅有一个顶级类声明

每个源文件中只能有一个顶级类（`class`）声明。

#### 3.4.2 类成员顺序

类成员的顺序对代码的易读性有很大的影响，但是没有一个统一正确的标准。不同的类可能有不同的排序方式。

最重要的一点，**类中的所有成员都应该以某种逻辑去排序，维护者要能够解释这种排序逻辑**。比如，新的方法不能总是习惯性地添加到类的结尾，因为这样就是按创建的时间顺序而非某种逻辑来排序了。

##### 3.4.2.1 重载：永不分离

当一个类中有多个构造函数或者多个同名方法时，这些方法应该按顺序排列在一起，中间不要插入其它方法（甚至是私有成员）。
